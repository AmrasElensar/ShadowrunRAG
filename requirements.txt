# ===================
# Core Dependencies
# ===================
fastapi==0.115.4
uvicorn[standard]==0.35.0
streamlit==1.48.1
watchdog==4.0.2
requests==2.32.4

# ===================
# WebSocket Support
# ===================
websocket-client==1.6.4        # For Streamlit WebSocket client

# ===================
# PDF & Document Processing
# ===================
PyMuPDF==1.24.12           # fitz - superior text/layout extraction
pdf2image==1.17.0          # PDF to PIL images for OCR
pytesseract==0.3.13        # OCR engine wrapper
Pillow>=7.1.0,<11.0.0      # Image processing - compatible with Streamlit
markdown==3.7             # Markdown parsing

# Unstructured with compatible versions (fallback option)
unstructured[local-inference]==0.18.11
unstructured[pdf]==0.18.11

# ===================
# AI/ML & RAG Stack
# ===================
ollama==0.5.3              # Latest stable version
chromadb==1.0.16           # Latest stable with Pydantic 2 support
pydantic==2.10.6          # Pydantic 2 for modern FastAPI compatibility
pydantic-settings==2.6.1  # Required for ChromaDB BaseSettings

# LangChain with latest compatible versions
langchain==0.3.27
langchain-community==0.3.27
langchain-core==0.3.74           # Required by langchain 0.3.27 (>=0.3.72)
langchain-text-splitters==0.3.9  # Required by langchain 0.3.27 (>=0.3.9)

# Tokenization
tiktoken==0.8.0

# ===================
# Marker Dependencies (PyTorch installed separately first)
# ===================
# Marker PDF processing (GPU-accelerated multi-column extraction)
marker-pdf==0.2.15
surya-ocr>=0.4.14          # Marker's OCR component with GPU support

# NOTE: detectron2 installed separately in Dockerfile after PyTorch
# detectron2 @ git+https://github.com/facebookresearch/detectron2.git

# ===================
# Utilities
# ===================
python-multipart==0.0.20    # For FastAPI file uploads
aiofiles==24.1.0           # Async file I/O
python-dotenv==1.0.1       # Env vars
tqdm==4.66.5               # Progress bars
numpy>=1.24.0,<3.0.0      # Compatible with all ML packages

# ===================
# Additional Required Dependencies
# ===================
typing-extensions>=4.0.0   # Required for modern Python typing
httpx>=0.25.0             # Required for modern HTTP clients